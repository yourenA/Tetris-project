"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),Block=function(){function e(t){_classCallCheck(this,e),this.siteSize=t.siteSize,this.arr=t.arr,this.BLOCK_SIZE=t.BLOCK_SIZE}return _createClass(e,[{key:"checkArrWith1",value:function(e,t){for(var o=0;o<=e.length-1;o++){console.log(e[o]);for(var a=0;a<=e.length-1;a++)1==e[o][a]&&(console.log("i:",o," j:",a),t.call(this,o,a))}}},{key:"draw",value:function(e,t){var o=document.createElement("div");o.className="activityModel",o.style.top=this.siteSize.top+e*this.BLOCK_SIZE+"px",o.style.left=this.siteSize.left+this.siteSize.width/2+t*this.BLOCK_SIZE+"px",document.body.appendChild(o)}},{key:"canMove",value:function(){var e=document.querySelectorAll(".activityModel"),t=[],o=[],a=!0,r=!0,n=!0,i=!0,l=!0,s=!1,c=void 0;try{for(var v,h=Array.from(e)[Symbol.iterator]();!(l=(v=h.next()).done);l=!0){var y=v.value;t.push(parseInt(y.style.top)),o.push(parseInt(y.style.left))}}catch(e){s=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(s)throw c}}var f=Math.min.apply(Math,t),u=Math.min.apply(Math,o),p=Math.max.apply(Math,o),d=Math.max.apply(Math,t);return p+20>=this.siteSize.left+this.siteSize.width&&(a=!1),u-20<this.siteSize.left&&(i=!1),d+20>=this.siteSize.top+this.siteSize.height&&(n=!1),f-20<this.siteSize.top&&(r=!1),{canMoveRight:a,canMoveLeft:i,canMoveTop:r,canMoveDown:n}}},{key:"move",value:function(){var e=this;document.onkeydown=function(t){var o=document.querySelectorAll(".activityModel"),a=void 0,r=void 0,n=void 0,i=void 0,l=t.keyCode;switch(console.log("key",l),l){case 37:if(r=e.canMove().canMoveLeft){var s=!0,c=!1,v=void 0;try{for(var h,y=o[Symbol.iterator]();!(s=(h=y.next()).done);s=!0){var f=h.value;f.style.left=parseInt(f.style.left)-20+"px"}}catch(e){c=!0,v=e}finally{try{!s&&y.return&&y.return()}finally{if(c)throw v}}}else console.log("can`t move left");break;case 38:if(n=e.canMove().canMoveTop){var u=!0,p=!1,d=void 0;try{for(var m,w=o[Symbol.iterator]();!(u=(m=w.next()).done);u=!0){var S=m.value;S.style.top=parseInt(S.style.top)-20+"px"}}catch(e){p=!0,d=e}finally{try{!u&&w.return&&w.return()}finally{if(p)throw d}}}else console.log("can`t move top");break;case 39:if(a=e.canMove().canMoveRight){var M=!0,g=!1,k=void 0;try{for(var b,C=o[Symbol.iterator]();!(M=(b=C.next()).done);M=!0){var I=b.value;I.style.left=parseInt(I.style.left)+20+"px"}}catch(e){g=!0,k=e}finally{try{!M&&C.return&&C.return()}finally{if(g)throw k}}}else console.log("can`t move right");break;case 40:if(i=e.canMove().canMoveDown){var x=!0,z=!1,_=void 0;try{for(var B,E=o[Symbol.iterator]();!(x=(B=E.next()).done);x=!0){var L=B.value;L.style.top=parseInt(L.style.top)+20+"px"}}catch(e){z=!0,_=e}finally{try{!x&&E.return&&E.return()}finally{if(z)throw _}}}else console.log("can`t move down");break;default:console.log("请选择上下左右按键")}}}},{key:"init",value:function(){this.checkArrWith1(this.arr,this.draw)}}]),e}();window.onload=function(){console.log("window onload");var e=document.querySelector(".site"),t=window.getComputedStyle(e),o=t.width,a=t.height,r=t.left,n=t.top,i={width:parseInt(o),height:parseInt(a),left:parseInt(r),top:parseInt(n)},l=[[1,0],[1,0],[1,1]],s=20,c={arr:l,siteSize:i,BLOCK_SIZE:s},v=new Block(c);v.init(),v.move()};